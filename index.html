<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>1440 OS</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components/timestack.css">
    <link rel="stylesheet" href="css/components/hud.css">
</head>
<body>

    <header class="app-header">
        <div class="dashboard-grid">
            <div class="brand-area">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                    <h1 id="main-title">1440</h1>
                    <button id="open-inbox-btn" class="inbox-trigger">
                        üì• <span id="inbox-badge">0</span>
                    </button>
                    <button id="open-review-btn" class="inbox-trigger" style="border-color: var(--accent-purple);">
                        üóìÔ∏è
                    </button>
                    <button id="cancel-schedule-btn" class="inbox-trigger hidden" style="background: var(--accent-red);">
                        Cancelar
                    </button>
                </div>
                <div class="date-navigator">
                    <button id="prev-day" class="nav-btn">‚Äπ</button>
                    <span id="current-date-display">HOY</span>
                    <button id="next-day" class="nav-btn" disabled>‚Ä∫</button>
                </div>
            </div>
            <div class="stats-container">
                <div class="stat-box invest">
                    <span class="stat-label">INVERSI√ìN</span>
                    <span class="stat-value" id="invest-time">0h 0m</span>
                </div>
                <div class="stat-box waste">
                    <span class="stat-label">BASURA</span>
                    <span class="stat-value" id="waste-time">0h 0m</span>
                </div>
                <div class="stat-box remaining">
                    <span class="stat-label">RESTANTE</span>
                    <span class="stat-value" id="remaining-mins">1440</span>
                </div>
            </div>
        </div>
        <div class="efficiency-bar-container">
            <div id="efficiency-bar" class="efficiency-fill"></div>
        </div>
    </header>

    <main id="time-stack-container"></main>

    <button id="ghost-trigger" class="fab-main">
        <span>+</span>
    </button>

    <div id="audit-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Auditor√≠a de Tiempo</h3>
                <div id="duration-control" class="duration-control hidden">
                    <div class="duration-display">
                        <span>Duraci√≥n:</span>
                        <strong id="duration-value">30 min</strong>
                    </div>
                    <input type="range" id="duration-slider" min="1" max="60" value="30" class="tech-slider">
                </div>
                <p id="modal-subtitle">¬øQu√© actividad realizaste?</p>
            </div>
            <label class="section-label invest-label">CONSTRUIR SISTEMA</label>
            <div class="activity-grid">
                <button data-type="DEEP_WORK" class="opt-btn invest">üß† Trabajo Profundo</button>
                <button data-type="MEETING" class="opt-btn invest">ü§ù Negocios / $</button>
                <button data-type="LEARNING" class="opt-btn invest">üìö Estudio</button>
                <button data-type="LIFE" class="opt-btn invest">üèãÔ∏è Salud / Vida</button>
            </div>
            <label class="section-label waste-label">ENTROP√çA</label>
            <div class="activity-grid waste-grid">
                <button data-type="WASTE" class="opt-btn waste">üì± Redes Sociales</button>
                <button data-type="WASTE" class="opt-btn waste">üéÆ Procrastinaci√≥n</button>
            </div>
            <button id="close-modal" class="text-btn">Cancelar</button>
        </div>
    </div>

    <div id="judge-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>El Juez</h3>
                <p id="judge-activity-name" style="color: white; font-weight: bold; font-size: 1.1rem; margin: 10px 0;"></p>
                <p style="color: var(--text-dim); font-size: 0.85rem;">¬øQu√© har√°s con esto para mejorar tu sistema?</p>
            </div>
            <div class="judge-grid" style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                <button data-decision="delete" class="judge-btn">üóëÔ∏è ELIMINAR (No aporta valor)</button>
                <button data-decision="delegate" class="judge-btn">ü§ù DELEGAR (Otro puede hacerlo)</button>
                <button data-decision="automate" class="judge-btn">‚öôÔ∏è SISTEMATIZAR (Crear regla)</button>
            </div>
            <hr style="border-color: #3c2a4d; margin: 20px 0;">
            <button id="judge-remove-error" class="text-btn" style="color: var(--accent-red);">Borrar (Me equivoqu√© al anotar)</button>
            <button id="close-judge" class="text-btn">Cancelar</button>
        </div>
    </div>

    <div id="inbox-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-height: 80dvh;">
            <div class="modal-header">
                <h3>Inbox Temporal</h3>
                <p style="color: var(--text-dim); font-size: 0.85rem;">Si no est√° en el calendario, no existe.</p>
            </div>
            <div class="inbox-input-group">
                <input type="text" id="inbox-input" placeholder="Nueva tarea o idea..." autocomplete="off">
                <button id="add-inbox-btn">+</button>
            </div>
            <ul id="inbox-list" class="inbox-list"></ul>
            <button id="close-inbox" class="text-btn">Cerrar</button>
        </div>
    </div>

    <div id="review-modal" class="modal-overlay hidden">
        <div class="modal-content" style="max-height: 90dvh;">
            <div class="modal-header">
                <h3>El Ritual del Domingo</h3>
                <p style="color: var(--text-dim); font-size: 0.85rem;">"Caes al nivel de tus sistemas"</p>
            </div>
            
            <div class="review-stats">
                <div class="review-stat-box invest-box">
                    <span>INVERSI√ìN TOTAL</span>
                    <strong id="review-invest-total">0h 0m</strong>
                </div>
                <div class="review-stat-box waste-box">
                    <span>ENTROP√çA TOTAL</span>
                    <strong id="review-waste-total">0h 0m</strong>
                </div>
            </div>

            <label class="section-label" style="margin-top: 20px;">TUS REGLAS DEL SISTEMA</label>
            <p style="font-size: 0.75rem; color: #888; margin-bottom: 10px;">Esta semana prometiste modificar estos comportamientos:</p>
            <ul id="review-rules-list" class="inbox-list" style="max-height: 200px; margin-bottom: 20px;">
                </ul>

            <button id="plan-next-week-btn" class="opt-btn invest" style="width: 100%; font-size: 1rem; padding: 20px; background: var(--accent-purple); color: white; border: none;">
                Limpiar Semana y Planificar
            </button>
            <p style="font-size: 0.7rem; color: #666; text-align: center; margin-top: 10px;">Esto borrar√° el registro de la semana pasada para empezar de cero con las "Rocas Grandes".</p>

            <button id="close-review" class="text-btn">Cerrar</button>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>